<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Data integration for data split — dataSplit • emr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Data integration for data split — dataSplit" />

<meta property="og:description" content="Split data by the date of the clinical event and show the data recorded before or after the clinical event and the window counts, which is the gap between the record date and index date." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">emr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Chi_Diagnosis.html">Get started with emr: Diagnosis (Chinese)</a>
    </li>
    <li>
      <a href="../articles/Chi_Procedure.html">Get started with emr: Procedure (Chinese)</a>
    </li>
    <li>
      <a href="../articles/Eng_Diagnosis.html">Get started with emr: Diagnosis</a>
    </li>
    <li>
      <a href="../articles/Eng_Procedure.html">Get started with emr: Procedure</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data integration for data split</h1>
    
    <div class="hidden name"><code>dataSplit.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Split data by the date of the clinical event and show the data recorded before or after the clinical event and the window counts, which is the gap between the record date and index date.</p>
    
    </div>

    <pre class="usage"><span class='fu'>splitDataByDate</span>(<span class='no'>dxDataFile</span>, <span class='no'>idColName</span>, <span class='no'>icdColName</span>, <span class='no'>dateColName</span>,
  <span class='no'>indexDateFile</span>, <span class='kw'>gap</span> <span class='kw'>=</span> <span class='fl'>30</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dxDataFile</th>
      <td><p>A file of clinical diagnostic data with at least 3 columns: "Member ID", "ICD", and "Date"</p></td>
    </tr>
    <tr>
      <th>idColName</th>
      <td><p>A column for Member ID of dxDataFile</p></td>
    </tr>
    <tr>
      <th>icdColName</th>
      <td><p>A column for ICD of dxDataFile</p></td>
    </tr>
    <tr>
      <th>dateColName</th>
      <td><p>A column for Date of dxDataFile</p></td>
    </tr>
    <tr>
      <th>indexDateFile</th>
      <td><p>Diagnostic dates for each patient in an observed period.</p></td>
    </tr>
    <tr>
      <th>gap</th>
      <td><p>gap length of the window. Default set to <code>30</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new <code>data.table</code> based on <code>dxDataFile</code> and classified by <code>indexDateFile</code> for each patient.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In most situations, users may need to extract data by a specific clinical event (e.g., first diagnosis dates of chronic diseases). Users can define a table of clinical index dates of each patient. The date can be first/last admission of specific cases(generated by `selectCases` function) or first/last admission date of each patient(generated by `patientRecordDate` function).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other data integration functions: <code><a href='selectCases.html'>selectCases</a></code>, <code><a href='recordPeriod.html'>recordPeriod</a></code>, <code><a href='conditionEra.html'>conditionEra</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># sample file for example</span>

<span class='no'>SampleforCertainPatient</span> <span class='kw'>&lt;-</span> <span class='no'>sampleDxFile</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span>(<span class='st'>"A0|B0|C0|D0"</span>,<span class='no'>ID</span>),]

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>SampleforCertainPatient</span>)</div><div class='output co'>#&gt;    ID   ICD       Date
#&gt; 1: A0  5855 2013-12-20
#&gt; 2: A0 V4511 2012-04-05
#&gt; 3: A0  V560 2010-03-28
#&gt; 4: A0  5853 2010-10-29
#&gt; 5: A0  5856 2009-07-25
#&gt; 6: B0  N185 2021-07-16</div><div class='input'>
<span class='co'># Defined index date of patient A0,B0,C0 and D0</span>

<span class='no'>indexDateTable</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>ID</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"A0"</span>,<span class='st'>"B0"</span>,<span class='st'>"C0"</span>,<span class='st'>"D0"</span>),
                             <span class='kw'>indexDate</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2023-08-12"</span>, <span class='st'>"2024-02-12"</span>,
                                           <span class='st'>"2015-12-05"</span>, <span class='st'>"2017-01-29"</span>),
                             <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>indexDateTable</span></div><div class='output co'>#&gt;   ID  indexDate
#&gt; 1 A0 2023-08-12
#&gt; 2 B0 2024-02-12
#&gt; 3 C0 2015-12-05
#&gt; 4 D0 2017-01-29</div><div class='input'><span class='co'># Split data by index date for each patient</span>

<span class='no'>splitedData</span> <span class='kw'>&lt;-</span> <span class='fu'>splitDataByDate</span>(<span class='no'>SampleforCertainPatient</span>, <span class='no'>ID</span>, <span class='no'>ICD</span>,<span class='no'>Date</span>,
                               <span class='kw'>indexDateFile</span> <span class='kw'>=</span> <span class='no'>indexDateTable</span>,
                               <span class='kw'>gap</span> <span class='kw'>=</span> <span class='fl'>30</span>)
<span class='no'>splitedData</span>[<span class='fl'>15</span>:<span class='fl'>19</span>,]</div><div class='output co'>#&gt;    ID  ICD       Date  indexDate timeTag window
#&gt; 1: B0 N183 2023-08-28 2024-02-12       B      6
#&gt; 2: B0  N19 2023-11-18 2024-02-12       B      3
#&gt; 3: B0  N19 2024-02-12 2024-02-12       A      1
#&gt; 4: C0 C671 2015-12-05 2015-12-05       A      1
#&gt; 5: C0 C048 2016-07-05 2015-12-05       A      8</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hsiang-Ju Chiu, Yi-Ju Tseng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>
