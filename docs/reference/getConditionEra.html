<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get the condition era — getConditionEra • emr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get the condition era — getConditionEra" />

<meta property="og:description" content="A Condition Era is defined as a span of time when the member is assumed to have a given condition.
Condition Eras are periods of Condition Occurrence.
Combining individual Condition Occurrences into a single Condition Era based on ICD code in clinical diagnostic data.
Condition Eras are built with a Persistence Window,deafault is 30 days, meaning, if no occurence of the same member id happens within 30 days of any one occurrence, it will be considered the end date of the last condition occurrence." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">emr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/emr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ChineseVersion_Diagnosis.html">Get Started: Diagnosis</a>
    </li>
    <li>
      <a href="../articles/ChineseVersion_Procedure.html">Get Started: Procedure</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get the condition era</h1>
    
    <div class="hidden name"><code>getConditionEra.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>A Condition Era is defined as a span of time when the member is assumed to have a given condition.
Condition Eras are periods of Condition Occurrence.
Combining individual Condition Occurrences into a single Condition Era based on ICD code in clinical diagnostic data.
Condition Eras are built with a Persistence Window,deafault is 30 days, meaning, if no occurence of the same member id happens within 30 days of any one occurrence, it will be considered the end date of the last condition occurrence.</p>
    
    </div>

    <pre class="usage"><span class='fu'>getConditionEra</span>(<span class='no'>DxDataFile</span>, <span class='no'>idColName</span>, <span class='no'>icdColName</span>, <span class='no'>dateColName</span>,
  <span class='no'>icd10usingDate</span>, <span class='kw'>groupDataType</span> <span class='kw'>=</span> <span class='no'>ccs</span>, <span class='no'>CustomGroupingTable</span>,
  <span class='kw'>isDescription</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>gapDate</span> <span class='kw'>=</span> <span class='fl'>30</span>, <span class='kw'>selectedCaseFile</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>DxDataFile</th>
      <td><p>A file of clinical diagnostic data with at least 3 columns: "MemberID","ICD", "Date"</p></td>
    </tr>
    <tr>
      <th>idColName</th>
      <td><p>A column for MemberID of DxDataFile</p></td>
    </tr>
    <tr>
      <th>icdColName</th>
      <td><p>A column for ICD of DxDataFile</p></td>
    </tr>
    <tr>
      <th>dateColName</th>
      <td><p>A column for Date of DxDataFile</p></td>
    </tr>
    <tr>
      <th>icd10usingDate</th>
      <td><p>Icd 10 using date</p></td>
    </tr>
    <tr>
      <th>groupDataType</th>
      <td><p>Four Stratified methods can be chosen: CCS (<code>'ccs'</code>), CCS levels (<code>'ccslvl1'</code>, <code>'ccslvl2'</code>, <code>'ccslvl3'</code>, <code>'ccslvl4'</code>), PheWAS (<code>'PheWAS'</code>), comorbidities (<code>'ahrq'</code>,<code>'charlson'</code>, <code>'elix'</code>), grepICD or customICD (<code>'customGrepIcdGroup'</code>, <code>'customIcdGroup'</code>). Change it to any of the other possible variables, default it is set to <code>"ccs"</code>.</p></td>
    </tr>
    <tr>
      <th>CustomGroupingTable</th>
      <td><p>Table is for groupDataType</p></td>
    </tr>
    <tr>
      <th>isDescription</th>
      <td><p>CCS/PheWAS categories or description for ICD-CM codes, default is <code>'TRUE'</code>.</p></td>
    </tr>
    <tr>
      <th>gapDate</th>
      <td><p>Length of condition era,By default it is set to 30 days <code>"30"</code>.</p></td>
    </tr>
    <tr>
      <th>selectedCaseFile</th>
      <td><p>Table for selectedCases. Default is <code>'NULL'</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>return DxDataFile with new column, condition era.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>head</span>(<span class='no'>sampleDxFile</span>)</div><div class='output co'>#&gt;    ID    ICD       Date
#&gt; 1:  C  553.3 2008-04-03
#&gt; 2:  A  553.3 2008-05-01
#&gt; 3:  A 553.20 2009-02-23
#&gt; 4:  B 553.20 2007-08-29
#&gt; 5:  A  553.3 2008-06-27
#&gt; 6:  B  K44.9 2019-11-10</div><div class='input'><span class='no'>selectedCaseFile</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='selectCases.html'>selectCases</a></span>(<span class='no'>sampleDxFile</span>, <span class='no'>ID</span>, <span class='no'>ICD</span>, <span class='no'>Date</span>,
                                <span class='kw'>icd10usingDate</span> <span class='kw'>=</span> <span class='st'>"2015/10/01"</span>,
                                <span class='kw'>groupDataType</span> <span class='kw'>=</span> <span class='no'>ccslvl3</span>,
                                <span class='kw'>caseCondition</span> <span class='kw'>=</span> <span class='st'>"Shock"</span>,
                                <span class='kw'>caseCount</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; <span class='message'>Wrong ICD format: total 9 ICD codes (the number of occurrences is in brackets)</span></div><div class='output co'>#&gt; <span class='message'>c("A0.11 (20)", "E114 (8)", "Z9.90 (6)", "F42 (6)", "001 (5)", "75.52 (4)", "755.2 (3)", "123.45 (3)", "7552 (2)")</span></div><div class='output co'>#&gt; <span class='message'>	</span></div><div class='output co'>#&gt; <span class='message'>Wrong ICD version: total 7 ICD codes (the number of occurrences is in brackets)</span></div><div class='output co'>#&gt; <span class='message'>c("V27.0 (18)", "A01.05 (8)", "42761 (7)", "V24.1 (6)", "A0105 (5)", "E03.0 (4)", "650 (4)")</span></div><div class='output co'>#&gt; <span class='message'>	</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The ICD mentioned above matches to "NA" due to the format or other issues.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: "Wrong ICD format" means the ICD has wrong format</span></div><div class='output co'>#&gt; <span class='warning'>Warning: "Wrong ICD version" means the ICD classify to wrong ICD version (cause the "icd10usingDate" or other issues)</span></div><div class='input'><span class='fu'>getConditionEra</span>(<span class='no'>sampleDxFile</span>, <span class='no'>ID</span>, <span class='no'>ICD</span>, <span class='no'>Date</span>, <span class='st'>"2015-10-01"</span>,
                <span class='kw'>groupDataType</span> <span class='kw'>=</span> <span class='no'>CCSlvl3</span>,
                <span class='kw'>selectedCaseFile</span> <span class='kw'>=</span> <span class='no'>selectedCaseFile</span>)</div><div class='output co'>#&gt; <span class='message'>Wrong ICD format: total 9 ICD codes (the number of occurrences is in brackets)</span></div><div class='output co'>#&gt; <span class='message'>c("A0.11 (20)", "E114 (8)", "Z9.90 (6)", "F42 (6)", "001 (5)", "75.52 (4)", "755.2 (3)", "123.45 (3)", "7552 (2)")</span></div><div class='output co'>#&gt; <span class='message'>	</span></div><div class='output co'>#&gt; <span class='message'>Wrong ICD version: total 7 ICD codes (the number of occurrences is in brackets)</span></div><div class='output co'>#&gt; <span class='message'>c("V27.0 (18)", "A01.05 (8)", "42761 (7)", "V24.1 (6)", "A0105 (5)", "E03.0 (4)", "650 (4)")</span></div><div class='output co'>#&gt; <span class='message'>	</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The ICD mentioned above matches to "NA" due to the format or other issues.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: "Wrong ICD format" means the ICD has wrong format</span></div><div class='output co'>#&gt; <span class='warning'>Warning: "Wrong ICD version" means the ICD classify to wrong ICD version (cause the "icd10usingDate" or other issues)</span></div><div class='output co'>#&gt;     ID                           CCS_LVL_3_LABEL firstCaseDate endCaseDate
#&gt;  1:  A                          Acute bronchitis    2009-06-09  2009-06-09
#&gt;  2:  A                      Cardiac dysrhythmias    2007-07-27  2009-03-02
#&gt;  3:  A                    Chronic kidney disease    2007-05-12  2009-04-26
#&gt;  4:  A                      Diaphragmatic hernia    2008-05-01  2008-06-27
#&gt;  5:  A                    Other abdominal hernia    2009-02-23  2009-02-23
#&gt;  6:  A Residual codes; unclassified; all E codes    2014-10-01  2014-10-01
#&gt;  7:  A                                     Shock    2006-05-03  2008-05-03
#&gt;  8:  B                          Acute bronchitis    2008-04-29  2008-04-29
#&gt;  9:  B                      Cardiac dysrhythmias    2007-07-16  2009-02-25
#&gt; 10:  B                    Chronic kidney disease    2007-05-28  2009-03-05
#&gt; 11:  B                    Other abdominal hernia    2007-08-29  2007-08-29
#&gt; 12:  B                                     Shock    2008-01-19  2008-01-19
#&gt; 13:  C                      Cardiac dysrhythmias    2007-06-20  2009-02-08
#&gt; 14:  C                    Chronic kidney disease    2007-04-21  2009-05-26
#&gt; 15:  C                      Diaphragmatic hernia    2008-04-03  2008-04-03
#&gt; 16:  C                     Heart valve disorders    2007-12-12  2007-12-12
#&gt; 17:  C                                     Shock    2008-03-30  2008-09-06
#&gt;     count era   period selectedCase
#&gt;  1:     1   1   0 days    Selected*
#&gt;  2:     6   4 584 days    Selected*
#&gt;  3:    29   8 715 days    Selected*
#&gt;  4:     2   2  57 days    Selected*
#&gt;  5:     1   1   0 days    Selected*
#&gt;  6:     1   1   0 days    Selected*
#&gt;  7:     2   2 731 days    Selected*
#&gt;  8:     1   1   0 days    Selected*
#&gt;  9:     7   5 590 days    Selected*
#&gt; 10:    27   9 647 days    Selected*
#&gt; 11:     1   1   0 days    Selected*
#&gt; 12:     1   1   0 days    Selected*
#&gt; 13:    11   6 599 days     Selected
#&gt; 14:    28  11 766 days     Selected
#&gt; 15:     1   1   0 days     Selected
#&gt; 16:     1   1   0 days     Selected
#&gt; 17:     2   2 160 days     Selected</div><div class='input'>
<span class='no'>grepTable</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>group</span> <span class='kw'>=</span> <span class='st'>"Cardiac dysrhythmias"</span>,
                        <span class='kw'>grepIcd</span> <span class='kw'>=</span> <span class='st'>"^427|^I48"</span>,
                        <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='fu'>getConditionEra</span>(<span class='no'>sampleDxFile</span>, <span class='no'>ID</span>, <span class='no'>ICD</span>, <span class='no'>Date</span>, <span class='st'>"2015-10-01"</span>,
                <span class='kw'>groupDataType</span> <span class='kw'>=</span> <span class='no'>customGrepIcdGroup</span>,
                <span class='kw'>CustomGroupingTable</span> <span class='kw'>=</span> <span class='no'>grepTable</span>)</div><div class='output co'>#&gt;    ID                group firstCaseDate endCaseDate count era    period
#&gt; 1:  A Cardiac dysrhythmias    2007-07-27  2021-12-13    11  10 5253 days
#&gt; 2:  B Cardiac dysrhythmias    2007-07-16  2020-10-11    11  10 4836 days
#&gt; 3:  C Cardiac dysrhythmias    2007-06-20  2021-09-16    18  14 5202 days
#&gt; 4:  D Cardiac dysrhythmias    2016-10-02  2016-10-02     2   1    0 days</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Yi-Ju Tseng, Hsiang-Ju Chiu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

