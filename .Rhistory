wrongVersionMsg_S <- icd10SWrongVer
WrongVersion_S <- icd10SNA[!is.na(Decimal),-"Decimal"]
}else{
wrongVersionMsg_S <-NA
WrongVersion_S <- NA
}
if(!is.null(nrow(WrongFormat_D))){
allWrongFormat <- WrongFormat_D
allWrongFormatMsg <- wrongformatMsg_D
if(!is.null(nrow(WrongFormat_S))){
allWrongFormat <- rbind(allWrongFormat,WrongFormat_S)
allWrongFormatMsg<- rbind(wrongformatMsg_D,wrongformatMsg_S)
}
}else if(!is.null(nrow(WrongFormat_S))){
allWrongFormat <- WrongFormat_S
allWrongFormatMsg<- wrongformatMsg_S
}#else{
#   allWrongFormat <- NA
#   allWrongFormatMsg<- NA
# }
if(!is.null(nrow(allWrongFormat))){
allWrongICD <- allWrongFormat
if(!is.null(nrow(WrongVersion_S))){
allWrongICD <- rbind(allWrongFormat,WrongVersion_S)
}
}else if(!is.null(nrow(WrongVersion_S))){
allWrongICD <- WrongVersion_S
}else{
allWrongICD <= NA
}
IcdPrDecimalToShort<-function(PrDataFile, icdColName, dateColName, icd10usingDate){
PrDataFile <- PrDataFile[,DataCol,with = FALSE]
icd10usingDate <- "2015/10/01"
icd_Decimal <- PrDataFile[grepl("[.]",PrDataFile$ICD),]
icd9D <- merge(icd_Decimal[Date < icd10usingDate], ICD9PrwithTwoFormat, by.x = "ICD", by.y = "Decimal", all.x = T)
icd10D <- icd_Decimal[Date >= icd10usingDate] #error
DtoSNA <- rbind(icd9D[is.na(Short),-"Short"], icd10D)
if(nrow(DtoSNA)>0){
icd9DWrongFormat <- icd9D[is.na(Short), list(count = .N),by = ICD]
icd10DWrongFormat <- icd_Decimal[Date >= icd10usingDate, list(count = .N),by = ICD]
if(nrow(icd9DWrongFormat)>0){
wrongformatMsg_D <- icd9DWrongFormat
WrongFormat_D <- icd9D[is.na(Short),-"Short"]
if(nrow(icd10DWrongFormat)>0){
wrongformatMsg_D <- rbind(wrongformatMsg_D,icd10DWrongFormat)
WrongFormat_D <- rbind(WrongFormat_D,icd10D)
}
}else if(nrow(icd10DWrongFormat)>0){
wrongformatMsg_D <- icd10DWrongFormat
WrongFormat_D <- icd10D
}
}else{
wrongformatMsg_D <- NA
WrongFormat_D <- NA
}
if(nrow(StoSNA)>0){
icd9SNA <- merge(icd9S[is.na(Decimal),-"Decimal"], prICD10, by = "ICD", all.x = T)
icd10SNA <- merge(icd10S[is.na(ICD_DESCRIPTION),-"ICD_DESCRIPTION"],ICD9PrwithTwoFormat,by.x = "ICD",by.y = "Short",all.x = T)
icd9SWrongFormat <- icd9SNA[is.na(ICD_DESCRIPTION), list(count = .N),by = ICD]
icd10SWrongFormat <- icd10SNA[is.na(Decimal), list(count = .N),by = ICD]
if(nrow(icd9SWrongFormat)>0){
wrongformatMsg_S <- icd9SWrongFormat
WrongFormat_S <- icd9S[is.na(Decimal),-"Decimal"]
if(nrow(icd10SWrongFormat)>0){
wrongformatMsg_S<- rbind(wrongformatMsg_S,icd10SWrongFormat)
WrongFormat_S <- rbind(WrongFormat_S,icd10S[is.na(ICD_DESCRIPTION),-"ICD_DESCRIPTION"])
}
}else if(nrow(icd10SWrongFormat)>0){
wrongformatMsg_S<- icd10SWrongFormat
WrongFormat_S <- icd10S[is.na(ICD_DESCRIPTION),-"ICD_DESCRIPTION"]
}else{
wrongformatMsg_S<-NA
WrongFormat_S <- NA
}
icd9SWrongVer <- icd9SNA[!is.na(ICD_DESCRIPTION), list(count = .N) ,by = ICD]
icd10SWrongVer <- icd10SNA[!is.na(Decimal), list(count = .N) ,by = ICD]
if(nrow(icd9SWrongVer)>0){
wrongVersionMsg <-icd9SWrongVer
WrongVersion <- icd9SNA[!is.na(ICD_DESCRIPTION),-"ICD_DESCRIPTION"]
if(nrow(icd10SWrongVer)>0){
wrongVersionMsg <- rbind(wrongVersionMsg,icd10SWrongVer)
WrongVersion <- rbind(WrongVersion,icd10SNA[is.na(Decimal),-"Decimal"])
}
}else if(nrow(icd10SWrongVer)>0){
wrongVersionMsg <- icd10SWrongVer
WrongVersion <- icd10SNA[!is.na(Decimal),-"Decimal"]
}else{
wrongVersionMsg <-NA
WrongVersion <- NA
}
}
WrongFormat_D
if(nrow(DtoSNA)>0){
icd9DWrongFormat <- icd9D[is.na(Short), list(count = .N),by = ICD]
icd10DWrongFormat <- icd_Decimal[Date >= icd10usingDate, list(count = .N),by = ICD]
if(nrow(icd9DWrongFormat)>0){
wrongformatMsg_D <- icd9DWrongFormat
WrongFormat_D <- icd9D[is.na(Short),-"Short"]
if(nrow(icd10DWrongFormat)>0){
wrongformatMsg_D <- rbind(wrongformatMsg_D,icd10DWrongFormat)
WrongFormat_D <- rbind(WrongFormat_D,icd10D)
}
}else if(nrow(icd10DWrongFormat)>0){
wrongformatMsg_D <- icd10DWrongFormat
WrongFormat_D <- icd10D
}
}else{
wrongformatMsg_D <- NA
WrongFormat_D <- NA
}
wrongformatMsg_D
WrongFormat_D
data <- c(1,2,3,4)
for(i in 1:length(data)){
for(j in  2:length(data)) {
message(paste0(data[i],",",data[j]))
}
}
for(j in  2:(length(data)-1)){
message(paste0(data[i],",",data[j]))
}
for(i in 1:length(data)){
for(j in  2:(length(data)-1)){
message(paste0(data[i],",",data[j]))
}
}
for(i in 1:length(data)){
for(j in  2:(length(data))){
message(paste0(data[i],",",data[j]))
}
}
for(i in 1:length(data)){
for(j in  2:(length(data))){
if(i!=j){
message(paste0(data[i],",",data[j]))
}
}
}
data <- c(1,2,3,4)
for(i in 1:(length(data)-1)){
for(j in  2:(length(data))){
message(paste0(data[i],",",data[j]))
}
}
for(i in 1:(length(data)-1)){
for(j in  2:(length(data))){
if(i!=J) message(paste0(data[i],",",data[j]))
}
}
for(i in 1:(length(data)-1)){
for(j in  2:(length(data))){
if(i!=j) message(paste0(data[i],",",data[j]))
}
}
for(i in 1:(length(data)-1)){
for(i in 1:(length(data)-1)){
for(j in  2:(length(data))){
if(i!=j) {
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:(length(data))){
if(i!=j) {
message(paste0(data[i],",",data[j]))
}
}
}
data <- c(1,2,3,4)
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(i!=j){
message(paste0(data[i],",",data[j]))
}
}
}
data <- c(1,2,3,4)
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(i!=j){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(i!=j & j > i){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(!(i>=j)){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(!(i>j)){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(!(i>=j)){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(i>j){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(j>i){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(j>=i){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(j>i){
message(paste0(data[i],",",data[j]))
}
}
}
for(i in 1:(length(data)-1)){
for(j in  2:length(data)){
if(!(j>=i)){
message(paste0(data[i],",",data[j]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  2:length(data)){
if(!(b>=a)){
message(paste0(data[a],",",data[b]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  2:length(data)){
if((b>=a)){
message(paste0(data[a],",",data[b]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  2:length(data)){
if((b>a)){
message(paste0(data[a],",",data[b]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  1:length(data)){
if((b>a)){
message(paste0(data[a],",",data[b]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  a:length(data)){
if((b>a)){
message(paste0(data[a],",",data[b]))
}
}
}
for(a in 1:(length(data)-1)){
for(b in  a+1:length(data)){
message(paste0(data[a],",",data[b]))
}
}
?for
for(a in 1:(length(data)-1)){
for(b in  a+1:length(data)){
ifelse(data[b]==NA,message(paste0(data[a],",",data[b])),next())
}
}
for(a in 1:(length(data)-1)){
for(b in  a+1:length(data)){
ifelse(data[b]==NA,message(paste0(data[a],",",data[b])),"")
}
}
data[b]==NA
data[b]
for(a in 1:(length(data)-1)){
for(b in  a+1:length(data)){
ifelse(is.na(data[b]),message(paste0(data[a],",",data[b])),"")
}
}
is.na(data[b])
for(a in 1:(length(data)-1)){
for(b in  a+1:length(data)){
ifelse(is.na(data[b]),message(paste0(data[a],",",data[b])),"")
}
}
for(a in 1:(length(data)-1)){
b <- a+1
while(b<=length){
message(paste0(data[a],",",data[b]))
b <- b+1
}
}
for(a in 1:(length(data)-1)){
b <- a+1
while(b<=length(data)){
message(paste0(data[a],",",data[b]))
b <- b+1
}
}
for(a in data){
b <- a+1
while(b<=length(data)){
message(paste0(data[a],",",data[b]))
b <- b+1
}
}
for(a in data){
b <- a+1
while(b<=data){
message(paste0(data[a],",",data[b]))
b <- b+1
}
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message(data[i] , ", ", data[j]);
}
}
for(i in 1:(length(data)-1)){
for(j in i+1:length(data)){
message(data[i] , ", ", data[j]);
}
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message(data[i] , ", ", data[j])
}
}
for(i in 1:(length(data)-1)){
for(j in i+1:length(data)){
message(data[i] , ", ", data[j])
}
}
for(j in (i+1):length(data)){
message(data[j])
}
for(i in 1:(length(data)-1)){
for(j in i+1:length(data)){
message("i = ",data[i])
message("j = ",data[j])
}
}
i <- 1
for(j in (i+1):length(data)){
message(data[j])
}
i <- 2
for(j in (i+1):length(data)){
message(data[j])
}
i <- 3
for(j in (i+1):length(data)){
message(data[j])
}
i <- 1
for(j in i+1:length(data)){
message(data[j])
}
for(i in 4:4)
for(i in 4:4){
message(i)
}
for(i in 5:4){
message(i)
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message("i = ",data[i])
message("j = ",data[j])
}
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message(data[i])
message(data[j])
}
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message(data[i] , ", ", data[j])
}
}
for(i in 1:(length(data)-1)){
for(j in (i+1):length(data)){
message(data[i] , ",", data[j])
}
}
data <- (1, 5, 10, 15, 20, 37)
data <- c(1, 5, 10, 15, 20, 37)
target <-  25
data <- c(1, 5, 10, 15, 20, 37)
target <-  25
for(a in data){
for(b in data){
if(data[a]+data[b] = target)
message(data[a],",",data[b])
}
}
data[a]
for(a in data){
for(b in data){
if(data[a]+data[b] = target){
message(data[a],",",data[b])
}
}
}
for(a in data){
for(b in data){
#if(data[a]+data[b] = target){
message(data[a],",",data[b])
#}
}
}
data <- c(1, 5, 10, 15, 20, 37)
target <-  25
for(a in data){
#for(b in data){
#if(data[a]+data[b] = target){
message(data[a],",")#,data[b])
#}
#}
}
for(a in 1:data){
#for(b in data){
#if(data[a]+data[b] = target){
message(data[a],",")#,data[b])
#}
#}
}
for(a in 1:length(data)){
#for(b in data){
#if(data[a]+data[b] = target){
message(data[a],",")#,data[b])
#}
#}
}
for(a in 1:length(data)){
for(b in data){
if(data[a]+data[b] = target){
message(data[a],",")#,data[b])
}
}
}
for(a in 1:length(data)){
for(b in data){
if(data[a]+data[b] = target){
message(data[a],",",data[b])
}
}
}
for(a in 1:length(data)){
for(b in  1:length(data)){
if(data[a]+data[b] = target){
message(data[a],",",data[b])
}
}
}
for(a in 1:length(data)){
for(b in  1:length(data)){
if(data[a]+data[b] == target){
message(data[a],",",data[b])
}
}
}
admission <- read.csv("~/newborn/ADMISSIONS.csv")
DIAGNOSIS_ICD <- read.csv("~/newborn/DIAGNOSES_ICD.csv")
library("data.table", lib.loc="~/R/win-library/3.4")
library("dplyr", lib.loc="~/R/win-library/3.4")
admission <- as.data.table(admission[,c(2,3,7,17)])
DIAGNOSIS_ICD <- as.data.table(DIAGNOSIS_ICD)
newborn_byA <- admission[grep("NEWBORN",admission$ADMISSION_TYPE),]
newborn_byA_ICD <- merge(DIAGNOSIS_ICD, newborn_byA, by = c("SUBJECT_ID","HADM_ID"), nomatch = T)
byA_PDA <- newborn_byA_ICD[grep("^7470$",newborn_byA_ICD$ICD9_CODE),]
byA_nonPDA <- newborn_byA_ICD[!byA_PDA, on = "ROW_ID"]
newborn_byD <- admission[grep("NEWBORN",admission$DIAGNOSIS),]
newborn_byD_ICD <- merge(DIAGNOSIS_ICD, newborn_byD, by = c("SUBJECT_ID","HADM_ID"), nomatch = T)
byD_PDA <- newborn_byD_ICD[grep("^7470$",newborn_byD_ICD$ICD9_CODE),]
byD_nonPDA <- newborn_byD_ICD[!byD_PDA, on = "ROW_ID"]
View(byA_PDA)
View(byA_nonPDA)
View(byA_nonPDA)
setwd("~/emr")
devtools::document()
devtools::check()
pkgdown::build_site()
