ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
for (rule in 1:nrow(groupingTable)){
rule<- 1
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
}
icdFile
rule
for (rule in 1:nrow(groupingTable)){
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
}
icdFile
rule<- 1
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
icdFile
ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
icdFile$Group[rule]
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
icdFile
rule<- 2
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
icdFile
ifelse(grepl(groupingTable$grepICD[rule], icdFile$Group[rule]),
groupingTable$Group[rule],
icdFile$ICD[rule])
grepl(groupingTable$grepICD[rule], icdFile$Group[rule])
for (rule in 1:nrow(icdFile)){
for(Group in 1:nrow(groupingTable)){
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[Group], icdFile$Group[rule]),
groupingTable$Group[Group],
icdFile$ICD[rule])
}
}
icdFile
rule <- 1
nrow(groupingTable)
rule <- 1
Group <- 1
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[Group], icdFile$Group[rule]),
groupingTable$Group[Group],
icdFile$ICD[rule])
icdFile
icdFile <- data.frame(ICD = c("I95.0", "I952", "I110", "01091"), stringsAsFactors = FALSE)
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
icdFile$Group <- icdFile$ICD
rule <- 1
Group <- 1
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[Group], icdFile$Group[rule]),
groupingTable$Group[Group],
icdFile$ICD[rule])
icdFile
Group <- 2
icdFile$Group[rule] <- ifelse(grepl(groupingTable$grepICD[Group], icdFile$Group[rule]),
groupingTable$Group[Group],
icdFile$ICD[rule])
icdFile
grepl(groupingTable$grepICD, icdFile$Group)
icdFile$Group
groupingTable$grepICD
character(length(icdFile))
icdFile
character(nrow(icdFile))
grepl(groupingTable$grepICD[1], icdFile$Group)
ifelse(grepl(groupingTable$grep_pattern[Group], icdFile$Group),
groupingTable$Group[Group],
Group)
groupingTable <- data.frame(Group = c("Hypotension", "Hypertension"),
grep_pattern = c("^I95|^I952", "^I11"),
stringsAsFactors = FALSE)
Group <- character(nrow(icdFile))
rule <- 1
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
}
icdFile
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
rule
Group <- character(nrow(icdFile))
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group<-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
}
Group
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
}
Group
rule
rule <- 1
Group <- character(nrow(icdFile))
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
Group
rule <- 2
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
Group
rule <- 3
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
Group
rule <- 4
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
Group)
Group
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
Group
icdFile
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
NA)
}
Group
Group <- character(nrow(icdFile))
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule],
NA)
}
Group
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], "yes")
}
Group <- character(nrow(icdFile))
for (rule in 1:nrow(icdFile)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], "yes")
}
Group
grepl(groupingTable$grep_pattern[rule], icdFile$Group)
rule
for (rule in 1:nrow(groupingTable)){
# icdFile$Group<-
Group <-  ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], "yes")
}
Group
rule<- 1
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], "yes")
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
rule<- 2
# icdFile$Group<-
ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
# icdFile$Group<-
test<- ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
paste(test,rule)
paste("test",rule)
for (rule in 1:nrow(groupingTable)){
eval(paste("test",rule,sep = ""))<- ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
}
eval(paste("test",rule,sep = ""))
for (rule in 1:nrow(groupingTable)){
eval(parse(paste("test",rule,sep = "")))<- ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
}
eval(parse(paste("test",rule,sep = "")))
eval(parse(text = paste("test",rule,sep = ""))) <- ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
eval(parse(text = paste0("test",rule,sep = "")))
eval(parse(text = paste0("test",rule,sep = ""))) <- ifelse(grepl(groupingTable$grep_pattern[rule], icdFile$Group),
groupingTable$Group[rule], icdFile$Group)
GroupList <- list()
rule
ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
GroupList[[length(GroupList)+1]] <- GrepICD
}
GroupList
unlist(unname(GroupList))
(unname(GroupList))
unlist(GroupList)
names(GroupList) <- 1:nrow(GroupList)
names(GroupList) <-c(1:nrow(GroupList))
GroupList
nrow(GroupList)
names(GroupList) <-c(1:length(GroupList))
GroupList
unlist(GroupList)
data.frame(unlist(GroupList),stringsAsFactors = F)
data.frame(!is.na(unlist(GroupList)),stringsAsFactors = F)
icdFile$ICD*4
(icdFile$ICD)*4
(icdFile$ICD){4}
"A"{2}
icdFile$ICD{4}
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdList$ICD
}
GroupList
GroupList
names(GroupList) <-c(1:length(GroupList))
names(icdList) <-c(1:length(icdList))
icdList
icdList
GroupList
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdList$ICD
}
icdList
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
icdFile$Group)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
names(GroupList) <-c(1:length(GroupList))
names(icdList) <-c(1:length(icdList))
GroupList
icdList
test <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
test
test <- test[is.na(test$unlist.GroupList.),]
test
test <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
test <- test[!is.na(test$unlist.GroupList.),]
test
test %>% unique
names(GroupList) <-c(paste("Group",1:length(GroupList,sep = ""))
names(icdList) <-c(1:length(icdList))
test <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
test <- test[!is.na(test$unlist.GroupList.),]
test %>% unique
icdFile
}
names(GroupList) <-c(paste("Group",1:length(GroupList,sep = "")))
paste("Group",1:length(GroupList,sep = ""))
GroupList
paste("Group",1:length(GroupList,sep = "")
paste("Group",1:length(GroupList,sep = ""))
paste0("Group",1:length(GroupList,sep = ""))
names(test) <- c("Group","ICD")
test <- test[!is.na(test$unlist.GroupList.),]
test <- test[!is.na(test$Group),]
test
test <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(test) <- c("Group","ICD")
test <- test[!is.na(test$Group),]
test
test <- test[!is.na(test$Group),] %>% unique()
test
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$Group),
groupingTable$Group[rule],
NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
test1 <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
test1
names(test1) <- c("Group","ICD")
test1 <- test1[!is.na(test1$Group),] %>% unique()
test1
GrepIcdDf_with_original <- left_join(icdFile,GrepIcdDf,"ICD")
GrepIcdDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GrepIcdDf) <- c("Group","ICD")
GrepIcdDf <- GrepIcdDf[!is.na(GrepIcdDf$Group),] %>% unique()
GrepIcdDf_with_original <- left_join(icdFile,GrepIcdDf,"ICD")
GrepIcdDf_with_original
icdFile <- data.frame(ICD = c("I95.0", "I952", "I110", "01091"), stringsAsFactors = FALSE)
groupingTable <- data.frame(Group = c("Hypotension", "Hypertension"),
grep_pattern = c("^I95|^I952", "^I11"),
stringsAsFactors = FALSE)
groupIcdToCustomGrep <- function(icdFile, groupingTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$ICD),
groupingTable$Group[rule],
NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GrepIcdDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GrepIcdDf) <- c("Group","ICD")
GrepIcdDf <- GrepIcdDf[!is.na(GrepIcdDf$Group),] %>% unique()
GrepIcdDf_with_original <- left_join(icdFile,GrepIcdDf,"ICD")
GrepIcdDf_with_original
}
groupIcdToCustomGrep(icdFile, groupingTable)
groupIcdToCustomGrep <- function(icdFile, groupingTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$ICD),
groupingTable$Group[rule],
NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GrepIcdDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GrepIcdDf) <- c("Group","ICD")
GrepIcdDf <- GrepIcdDf[!is.na(GrepIcdDf$Group),] %>% unique()
GrepIcdDf_with_original <- left_join(icdFile,GrepIcdDf,"ICD")$Group
GrepIcdDf_with_original
}
groupIcdToCustomGrep(icdFile, groupingTable)
icdFile$Group <- groupIcdToCustomGrep(icdFile, groupingTable)
icdFile
groupIcdToCustomGrep <- function(icdFile, groupingTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$ICD), groupingTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
icdFile$Group <- groupIcdToCustomGrep(icdFile, groupingTable)
icdFile
icdFile$Group <- groupIcdToCustomGrep(icdFile, groupingTable)
icdFile$Group <- groupIcdToCustomGrep(icdFile, groupingTable)
icdFile
groupIcdToCustomGrep <- function(icdFile, groupingTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(groupingTable$grep_pattern[rule],icdFile$ICD), groupingTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
icdFile$Group <- groupIcdToCustomGrep(icdFile, groupingTable)
icdFile
groupIcdToCustomGrepList <- function(icdFile, grepTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(grepTable$grep_pattern[rule],icdFile$ICD), grepTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
groupIcdToCustomGrepList(icdFile, grepTable)
grepTable <- data.frame(Group = c("Hypotension", "Hypertension"),
grep_pattern = c("^I95|^I952", "^I11"),
stringsAsFactors = FALSE)
groupIcdToCustomGrepList <- function(icdFile, grepTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(grepTable$grep_pattern[rule],icdFile$ICD), grepTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
groupIcdToCustomGrepList(icdFile, grepTable)
grepTable
groupIcdToCustomGrepList <- function(icdFile, grepTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(grepTable$grep_pattern[rule],icdFile$ICD), grepTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
groupIcdToCustomGrepList(icdFile, grepTable)
icdFile
icdFile <- data.frame(ICD = c("I95.0", "I952", "I110", "01091"), stringsAsFactors = FALSE)
groupingTable <- data.frame(ICD = c("I95.0","I951","I952","I110","I11.9"),
Group = c("Hypotension","Hypotension","Hypotension", "Hypertension", "Hypertension"),
stringsAsFactors = FALSE)
grepTable <- data.frame(Group = c("Hypotension", "Hypertension"),
grep_pattern = c("^I95|^I952", "^I11"),
stringsAsFactors = FALSE)
groupIcdToCustomGrepList <- function(icdFile, grepTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
GroupList <- list()
icdList<- list()
for (rule in 1:nrow(icdFile)){
GrepICD <- ifelse(grepl(grepTable$grep_pattern[rule],icdFile$ICD), grepTable$Group[rule], NA)
GroupList[[length(GroupList)+1]] <- GrepICD
icdList[[length(icdList)+1]] <- icdFile$ICD
}
GroupDf <- cbind(data.frame(unlist(GroupList),stringsAsFactors = F),data.frame(unlist(icdList),stringsAsFactors = F))
names(GroupDf) <- c("Group","ICD")
GroupDf <- GroupDf[!is.na(GroupDf$Group),] %>% unique()
GroupDf_with_original <- left_join(icdFile,GroupDf,"ICD")$Group
GroupDf_with_original
}
groupIcdToCustomGrepList(icdFile, grepTable)
groupIcdToCustomGrep <- function(icdFile, groupingTable){
icdFile$ICD <- convertIcdDecimaltoShort(icdFile$ICD)$Short
groupingTable$ICD <- convertIcdDecimaltoShort(groupingTable$ICD)$Short
GroupDf <- left_join(icdFile, groupingTable, by = "ICD")$Group
GroupDf
}
groupIcdToCustomGrep(icdFile, groupingTable)
icd9withTwoFormat$Short[1:10]
icd9_Short <- icd9withTwoFormat$Short[1:10]
icd9_Short
icd9_Decimal <- icd9withTwoFormat$Decimal[1:10]
icd9_Decimal <- icd9withTwoFormat$Decimal[1:10]
icd9_Decimal
icd10GenerateDecimalFormat(icd10)
icd10_Decimal <- icd10withTwoFormat$Decimal[1:10]
icd10_Decimal
devtools::document()
setwd("~/emr")
devtools::document()
devtools::check()
devtools::check()
